;/*FB_PKG_DELIM*/

__d("LSUpdateOrInsertEditMessageHistory",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.filter(b.db.table(322).fetch([[[a[0],a[2]]],"originalMsgPkEditTs"]),function(c){return c.originalMessagePk===a[0]&&b.i64.eq(c.threadKey,a[1])&&b.i64.eq(c.serverAdjustedEditTsMs,a[2])}).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(322).add({pk:void 0,originalMessagePk:a[0],threadKey:a[1],serverAdjustedEditTsMs:a[2],messageContent:a[3],sendStatus:a[4]}):(d=c.item,b.db.table(322).put({pk:d.pk,originalMessagePk:a[0],threadKey:a[1],serverAdjustedEditTsMs:a[2],messageContent:a[3],sendStatus:a[4]}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateOrInsertEditMessageHistoryStoredProcedure";e.exports=a}),null);